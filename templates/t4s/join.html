{% block content %}

    <h1>회원가입</h1>
    <form method="post" action="{% url 't4s:join' %}" id="form">
        {% csrf_token %}
        <div>
            <label>사용자 ID</label>
            <input type="text" name="username" id="username">
        </div>
        <div>
            <label>비밀번호1</label>
            <input type="password" name="password1" id="password1">
        </div>
        <div>
            <label>비밀번호2</label>
            <input type="password" name="password2" id="password2">
        </div>
        간격1: <div id="output1"></div>
        간격2: <div id="output2"></div>
        <script>
            const output1 = document.getElementById('output1');
            const output2 = document.getElementById('output2');
            const password1 = document.getElementById('password1');
            const password2 = document.getElementById('password2');

            let last;
            let keystroke1 = []; //키 간격 데이터 배열
            let keystroke2 = [];
            let i = -1; //0으로 하면 누르는 순간 i가 1증가. 배열의 첫번째 값이 NaN이 됨

            password1.addEventListener("input", () => {
                let n = new Date();
                output1.textContent = (last-n).toString() + 'ms';
                keystroke1[i] = last-n;
                i++;
                last = n;
            });

            password2.addEventListener("input", () => {
                let n = new Date();
                output2.textContent = (last-n).toString() + 'ms';
                keystroke2[i] = last-n;
                i++;
                last = n;
            });


            //password1의 입력이 끝나 blur 되었을 때
            password1.addEventListener("blur", () => {
                output1.textContent = keystroke1.toString();
                initVar();
            });

            //password2의 입력이 끝나 blur 되었을 때
            password2.addEventListener("blur", () => {
                output2.textContent = keystroke2.toString();
                initVar();
            });



            function sendData() {
                document.getElementById("keystroke1").value = keystroke1;
                document.getElementById("keystroke2").value = keystroke2;
                document.getElementById("form").submit();
            }

            function initVar() {
                last = null;
                i = -1;
            }

        </script>
        <input type="hidden" name="keystroke1" id="keystroke1">
        <input type="hidden" name="keystroke2" id="keystroke2">
        <button type="button" onclick="sendData()">로그인</button>
    </form>

    <h1>{{ error }}</h1>

{% endblock %}